"use strict";var headerButton=document.querySelector(".header__button"),mainPage=document.querySelector("main"),timeNow=mainPage.querySelector(".diagram__time-now"),timeLine=mainPage.querySelector(".diagram__time-line"),room=mainPage.querySelector(".floor__room"),roomTitles=mainPage.querySelectorAll(".floor__room-title"),events=mainPage.querySelectorAll(".floor__event"),eventTooltips=mainPage.querySelectorAll(".tooltip"),slotsOffTime=mainPage.querySelectorAll(".floor__off-time"),date=mainPage.querySelector(".date"),dateActive=date.querySelector(".date__active-date"),dateCalendar=date.querySelector(".calendar"),eventPage=document.querySelector(".event"),eventHeading=eventPage.querySelector(".event__heading"),inputEventName=eventPage.querySelector(".event__name input"),buttonResetEventName=inputEventName.nextElementSibling,inputEventDate=eventPage.querySelector(".event__date input"),eventCalendarControl=eventPage.querySelector(".event__calendar-contol"),eventCalendar=eventPage.querySelector(".calendar"),inputEventStart=eventPage.querySelector(".event__start input"),inputEventEnd=eventPage.querySelector(".event__end input"),inputEventCandidate=eventPage.querySelector(".event__participants input"),buttonOpenCandidates=eventPage.querySelector(".event__candidates-control"),buttonResetInputCandidate=inputEventCandidate.nextElementSibling,eventCandidatesList=eventPage.querySelector(".event__candidates"),eventUsersList=eventPage.querySelector(".event__users"),eventRecommendation=eventPage.querySelector(".event__recommendation"),eventVariants=eventRecommendation.querySelectorAll(".event__variant"),eventWarning=eventPage.querySelector(".event__warning"),buttonTopEventClose=eventPage.querySelector(".event__top-close"),buttonFooterEventClose=eventPage.querySelector(".event__footer-close"),buttonEventCreate=eventPage.querySelector(".event__create"),buttonEventSave=eventPage.querySelector(".event__save"),buttonEventRemove=eventPage.querySelector(".event__remove"),modal=document.querySelector(".modal"),modalEventCreate=modal.querySelector(".modal__message--create"),modalEventRemove=modal.querySelector(".modal__message--remove"),buttonModalOk=modal.querySelector(".modal__ok"),buttonModalCancel=modal.querySelector(".modal__candel"),buttonModalRemove=modal.querySelector(".modal__remove"),onClickToggle=function(e,t,n,a){e.addEventListener("click",function(o){o.preventDefault(),""!=t&&e.classList.toggle(t),""!=n&&o.target.classList.contains(targerClass)&&a()})},eventOpen=function(){eventPage.removeAttribute("style"),mainPage.style.display="none",headerButton.style.display="none",modal.style.display="none"},eventClose=function(){eventPage.style.display="none",mainPage.removeAttribute("style"),headerButton.removeAttribute("style"),eventRecommendation.removeAttribute("style"),eventWarning.removeAttribute("style")};eventPage.style.display="none";var timeOutput=function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),a=60*t+n;timeNow.innerHTML=10>n?t+":0"+n:t+":"+n,a>=450&&1410>=a?(timeNow.style.left=1.1*(a-450)+180+"px",timeLine.style.left=1.1*(a-450)+180+"px"):450>a?(timeNow.style.left="180px",timeLine.style.left="180px"):(timeNow.style.left="100%",timeLine.style.left="100%")};timeOutput();var timeOutputUpdate=setInterval(function(){timeOutput()},6e4),roomOnScroll=function(e){if(window.pageXOffset>room.offsetWidth)for(var t=0;t<e.length;t++)e[t].classList.add("floor__room-title--tooltip"),e[t].style.left=window.pageXOffset+12+"px";else for(var n=0;n<roomTitles.length;n++)e[n].classList.contains("floor__room-title--tooltip")&&e[n].classList.remove("floor__room-title--tooltip")};window.addEventListener("scroll",function(){roomOnScroll(roomTitles)}),dateActive.addEventListener("click",function(){dateCalendar.classList.toggle("date__calendar--shown")}),dateCalendar.addEventListener("click",function(e){e.target.classList.contains("calendar__day-number")&&setTimeout(function(){dateCalendar.classList.remove("date__calendar--shown")},350)}),eventCalendarControl.addEventListener("click",function(){eventCalendar.classList.toggle("event__calendar--shown")}),eventCalendar.addEventListener("click",function(e){e.target.classList.contains("calendar__day-number")&&(e.preventDefault(),setTimeout(function(){eventCalendar.classList.remove("event__calendar--shown")},350))}),headerButton.addEventListener("click",function(e){e.preventDefault(),eventOpen(),buttonResetEventName.style.display="none",inputEventDate.value="",inputEventStart.value="",inputEventEnd.value="",eventUsersList.innerHTML="",eventRecommendation.innerHTML="",eventWarning.style.display="none"});for(var i=0;i<slotsOffTime.length;i++)onClickToggle(slotsOffTime[i],"","floor__plus",eventOpen);for(var i=0;i<events.length;i++){var eventLeft=events[i].offsetWidth/2-eventTooltips[i].offsetWidth/2;eventTooltips[i].style.marginLeft=eventLeft+"px",onClickToggle(events[i],"floor__event--active","tooltip__edit",eventOpen)}inputEventCandidate.addEventListener("focus",function(){eventCandidatesList.classList.add("event__candidates--shown"),buttonOpenCandidates.removeAttribute("style")}),inputEventCandidate.addEventListener("blur",function(){eventCandidatesList.classList.contains("event__candidates--shown")&&(eventCandidatesList.classList.remove("event__candidates--shown"),buttonOpenCandidates.style.display="none"),inputEventCandidate.value?buttonResetInputCandidate.removeAttribute("style"):buttonResetInputCandidate.style.display="none"}),buttonOpenCandidates.addEventListener("click",function(){eventCandidatesList.classList.contains("event__candidates--shown")&&eventCandidatesList.classList.remove("event__candidates--shown")}),inputEventName.addEventListener("input",function(){inputEventName.value?buttonResetEventName.removeAttribute("style"):buttonResetEventName.style.display="none"});for(var variantOnClick=function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.querySelector("input");if(n.checked){eventRecommendation.dataset.heading="Рекомендованные переговорки",n.checked=!1;for(var a=0;a<eventVariants.length;a++)eventVariants[a].removeAttribute("style"),eventVariants[a].classList.remove("event__variant--active")}else{eventRecommendation.dataset.heading="Ваша переговорка",n.checked=!0,e.classList.add("event__variant--active");for(var a=0;a<eventVariants.length;a++)eventVariants[a].classList.contains("event__variant--active")||(eventVariants[a].style.display="none")}})},i=0;i<eventVariants.length;i++)variantOnClick(eventVariants[i]);buttonTopEventClose.addEventListener("click",function(){eventClose()}),buttonFooterEventClose.addEventListener("click",function(){eventClose()}),modal.addEventListener("click",function(e){e.target.classList.contains("modal__remove")?(eventPage.submit(),eventClose(),modal.style.display="none"):e.target.classList.contains("modal__button")&&(modal.style.display="none")});